webpackJsonp([1],{180:function(e,t,s){"use strict";var o=s(22),a=s(181),n=s(182),r=s(183),i=s(184),c=s(185),u=s(186),L=s(187);$(function(){function e(){if(l){var e=o.CONTENT_TOOLS.getProductInfo();o.GLOBALVAL.product.productType=e.productType;var s="en"===window.localStorage.getItem("EO_LANG_TEXT")||5==o.GLOBALVAL.product.productType?"en":"cn";if(o.GLOBALVAL.product.LANG=s,o.GLOBALVAL.product.version=e.version,o.GLOBALVAL.product.productType){if(o.GLOBALVAL.info.hashArgs=o.CONTENT_TOOLS.getHashStringArgs(),!o.GLOBALVAL.info.hashArgs.spaceKey){var d=location.hostname.split(".w.");d.length>1&&(o.GLOBALVAL.info.hashArgs.spaceKey=d[0])}o.CONTENT_TOOLS.getServerURL();var p=o.CONTENT_TOOLS.judgeWhichTest();switch(p&&(o.GLOBALVAL.product.hasConsole||(o.GLOBALVAL.product.hasConsole=!0,console.log("%c   welcome,eolinker_extension-6.6.0","font-size:14px;color:#4caf50;font-weight:bold;background:url('https://www.eolinker.com/assets/images/favicon.ico') no-repeat;background-size:14px;background-position:top left;")),-1===window.location.hash.indexOf("/monitor")&&t(p)),o.GLOBALVAL.info.testType=p,p){case"commonQuickTest":case"normal":(0,L.normalTest)();break;case"case":o.GLOBALVAL.product.version<"5.6.0"?(0,r.caseTest)():(0,i.batchCaseTest)("case");break;case"batchCase":(0,i.batchCaseTest)("batchCase");break;case"autoUi":case"commonCaseUi":(0,n.autoUiTest)();break;case"autoCode":case"commonCaseCode":(0,c.autoCodeTest)();break;case"commonFunction":(0,a.functionTest)();break;case"autoBatch":case"commonCaseBatch":(0,u.batchAutoTest)();break;case"share":(0,L.normalTest)("share")}}}}function t(e){var t=null,s={companyHashKey:o.GLOBALVAL.info.hashArgs.companyHashKey,spaceKey:o.GLOBALVAL.info.hashArgs.spaceKey,projectHashKey:o.GLOBALVAL.info.hashArgs.projectHashKey,shareCode:o.GLOBALVAL.info.hashArgs.shareCode,shareID:o.GLOBALVAL.info.hashArgs.shareID},a={1:"5.0",5:"5.0",2:"5.1.7"};switch(Number(o.GLOBALVAL.product.productType)){case 1:case 5:case 2:"share"===e?t="apiManagementPro/Share/getFunctionDataList":o.GLOBALVAL.product.version>=a[Number(o.GLOBALVAL.product.productType)]?(t="generalFunction/CommonFunction/getFunctionDataList","autoUi"===e||"commonCaseBatch"===e||"autoBatch"===e||"autoCode"===e||"commonCaseUi"===e||"commonCaseCode"===e?s.module=1:"commonQuickTest"===e?(o.GLOBALVAL.product.version<"5.7.0"&&(t=null),s.module=-1):"commonFunction"===e?window.location.href.indexOf("/home/ams/function")>-1?s.module=-1:window.location.href.indexOf("/home/amt/function")>-1?s.module=-2:window.location.href.indexOf("/home/ams/automatic/inside/")>-1?s.module=1:window.location.href.indexOf("/home/ams/project/inside/")>-1&&(s.module=0):s.module=0):t="autoUi"===e||"commonCaseBatch"===e||"autoBatch"===e||"autoCode"===e||"commonCaseUi"===e||"commonCaseCode"===e?"automatedTest/CommonFunction/getFunctionDataList":"apiManagementPro/CommonFunction/getFunctionDataList";break;default:return}t&&$.ajax({url:o.GLOBALVAL.info.httpUrl+t,method:"POST",contentType:"application/x-www-form-urlencoded",data:s}).done(function(e,t,s){try{e=JSON.parse(e)}catch(e){}if("000000"==e.statusCode)try{o.GLOBALVAL.info.commonFunList=JSON.parse(e).functionList}catch(t){o.GLOBALVAL.info.commonFunList=e.functionList}else o.GLOBALVAL.info.commonFunList=[]}).fail(function(e,t){})}var s=document.getElementById("plug-inner-script"),l=!1;try{var d=$('meta[name="author"]')[0].content;l="广州银云信息科技有限公司"==d||"EOLINKER Co.,Ltd."==d}catch(e){}if(l)if(s)s.innerHTML="window.plug = {type: 'application/eolinker',version:660}";else{var p=document.createElement("script");p.innerHTML="window.plug = {type: 'application/eolinker',version:660}";var f=document.getElementsByTagName("script")[0];f.parentNode.insertBefore(p,f)}e(),window.onhashchange=e})},181:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.functionTest=void 0;var o=s(1),a=function(e){return e&&e.__esModule?e:{default:e}}(o),n=s(22);t.functionTest=function(){n.CONTENT_TOOLS.initFun(),function(){$(document).off("click","#ui_btn_test")}(),$(document).on("click","#ui_btn_test",function(){var e=window.sessionStorage.getItem("plug-batchTest-info");e=JSON.parse(e);var t=$("#plug-batch-in-result-js");if("plug"===$(this).attr("eo-attr-test-type"))if("true"==$(this).attr("testing")){n.GLOBALVAL.port.autoCode=chrome.runtime.connect({name:"autoCodeTest"});var s={};s.caseType=1,s.autoCodeType="COMMON_FUNCTION",s.singleCaseList=[e.code],s.productType=n.GLOBALVAL.product.productType,s.LANG=n.GLOBALVAL.product.LANG,s.location=n.GLOBALVAL.info.serverURL,s.httpUrl=n.GLOBALVAL.info.httpUrl,s.version=n.GLOBALVAL.product.version,s.testType=n.GLOBALVAL.info.testType,s.commonFunList=n.GLOBALVAL.info.commonFunList,n.GLOBALVAL.port.autoCode.postMessage(s),n.GLOBALVAL.port.autoCode.onMessage.addListener(function(e){var s={finish:"success",interrupt:"terminate",timeout:"terminate",codeError:"codeError"},o="";"codeError"===s[e.status]?(e.errorReport=e.errorReport||{},o=e.errorReport.content):o=(0,a.default)(e.return);var n={status:s[e.status]||"codeError",reportList:e.globalReport,content:o};window.sessionStorage.setItem("plug-background-result",(0,a.default)(n)),t.text("tested")})}else try{n.GLOBALVAL.port.autoCode.postMessage({stopStatus:!0})}catch(e){}})}},182:function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.autoUiTest=void 0;var a=s(15),n=o(a),r=s(7),i=o(r),c=s(8),u=o(c),L=s(11),l=o(L),d=s(1),p=o(d),f=s(22),A=s(10),m=s(48);t.autoUiTest=function(){function e(){f.GLOBALVAL.isQuerying=!0,$.ajax({url:f.GLOBALVAL.info.httpUrl+m.autoUi.query,method:"POST",contentType:"application/x-www-form-urlencoded",data:{companyHashKey:f.GLOBALVAL.info.hashArgs.companyHashKey,spaceKey:f.GLOBALVAL.info.hashArgs.spaceKey,projectHashKey:f.GLOBALVAL.info.hashArgs.projectHashKey,caseID:f.GLOBALVAL.info.hashArgs.caseID,projectID:f.GLOBALVAL.info.hashArgs.projectID,module:"commonCaseUi"==f.GLOBALVAL.info.testType?1:0}}).done(function(e,t,s){try{L=JSON.parse(e),L.singleCaseList=L.singCaseList||L.singleCaseList}catch(t){L=e}}).fail(function(e,t){}).always(function(){f.GLOBALVAL.isQuerying=!1})}function t(e,t){$.ajax({url:f.GLOBALVAL.info.httpUrl+m.autoUi.queryByID,method:"POST",contentType:"application/x-www-form-urlencoded",data:{spaceKey:f.GLOBALVAL.info.hashArgs.spaceKey,caseID:f.GLOBALVAL.info.hashArgs.caseID,projectHashKey:f.GLOBALVAL.info.hashArgs.projectHashKey,tempID:(0,p.default)(e),module:"commonCaseUi"===f.GLOBALVAL.info.testType?1:0}}).done(function(e,s,o){"000000"==e.statusCode&&(L=e,t())}).fail(function(e,t){})}function s(e){var t={caseID:f.GLOBALVAL.info.hashArgs.caseID,companyHashKey:f.GLOBALVAL.info.hashArgs.companyHashKey,spaceKey:f.GLOBALVAL.info.hashArgs.spaceKey,projectHashKey:f.GLOBALVAL.info.hashArgs.projectHashKey,module:"commonCaseUi"===f.GLOBALVAL.info.testType?1:0};t.result=e,$.ajax({url:f.GLOBALVAL.info.httpUrl+m.autoUi.addHistory,method:"POST",contentType:"application/x-www-form-urlencoded",data:t}).done(function(e,t,s){}).fail(function(e,t){console.log("Add History Fail")})}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{testStatus:"testing",testWay:"batch",index:0},o={},a={},r=$("#plug-batch-in-result-js");if(f.GLOBALVAL.port.auto=chrome.runtime.connect({name:"autoUiTest"}),"tested"==e.testStatus){var d=function(){h=!1;var t=[],d={};if(f.GLOBALVAL.product.version>="5.1.8"?(d.singleCaseList=L.singleCaseList||[],d.fileList=L.fileList||[]):(t=(0,l.default)([],L.singleCaseList),"single"===e.testWay?d.singleCaseList=[t[e.index-1]]:d.singleCaseList=t,d.singleCaseList=(L.beforeCaseList||[]).concat(d.singleCaseList).concat(L.afterCaseList||[])),d.testWay=e.testWay,d.productType=f.GLOBALVAL.product.productType,d.LANG=f.GLOBALVAL.product.LANG,d.testType=f.GLOBALVAL.info.testType,d.caseType=0,d.hashArgs=f.GLOBALVAL.info.hashArgs,d.caseName=L.caseName,d.caseID=f.GLOBALVAL.info.hashArgs.caseID,d.version=f.GLOBALVAL.product.version,d.location=f.GLOBALVAL.info.serverURL,d.httpUrl=f.GLOBALVAL.info.httpUrl,d.env=o.env,d.timeoutLimit=o.timeoutLimit,d.commonFunList=f.GLOBALVAL.info.commonFunList,o.collectionArr&&o.collectionArr.length){var A=function(){var e=(0,u.default)(i.default.mark(function e(){var t;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<o.collectionArr.length)){e.next=9;break}if(!h){e.next=4;break}return e.abrupt("break",9);case 4:return e.next=6,m(o.collectionArr[t]);case 6:t++,e.next=1;break;case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),m=function(e){return new n.default(function(t,s){d.collectionInfo=e,f.GLOBALVAL.port.auto.postMessage(d),f.GLOBALVAL.port.auto.onMessage.removeListener(a.listenerCallback),a.listenerCallback=function(e){if("tested"==e.status){var s={};O.push(e),s[e.collectionName]=f.BATCH_AUTO_FUN.formatReportArrayToObject("automatic",e),window.sessionStorage.setItem("plug-background-result",(0,p.default)(s)),b.totalCase++,"finish"==e.reportStatus||"finish"==e.status?b.successCase++:b.errorCase++,r.text((0,p.default)({status:"testing"})),t()}},f.GLOBALVAL.port.auto.onMessage.addListener(a.listenerCallback)})},g=new Date,b={time:"0s",totalCase:0,errorCase:0,successCase:0},O=[];A().then(function(){if(b.status="tested",b.time=(new Date-g)/1e3+"s",window.sessionStorage.setItem("plug-background-result",(0,p.default)(b)),r.text((0,p.default)({status:"tested"})),!h){s((0,p.default)({time:b.time,totalCase:1,successCase:b.errorCase>0?0:1,errorCase:b.errorCase>0?1:0,responseList:[(0,l.default)(b,{responseList:O,type:"ddt",caseType:0,caseID:f.GLOBALVAL.info.hashArgs.caseID,caseName:L.caseName,reportStatus:b.errorCase>0?"error":"finish"})]}))}}).catch(function(e){console.log(e)})}else f.GLOBALVAL.port.auto.postMessage(d),f.GLOBALVAL.port.auto.onMessage.addListener(function(e){if(f.GLOBALVAL.product.version<"5.1.8"?window.sessionStorage.setItem("plug-background-result",(0,p.default)(e)):window.sessionStorage.setItem("plug-background-result",(0,p.default)(f.BATCH_AUTO_FUN.formatReportArrayToObject("automatic",e))),c={responseList:[],status:e.status},r.text((0,p.default)(c)),!h&&(1==f.GLOBALVAL.product.productType||5==f.GLOBALVAL.product.productType||2==f.GLOBALVAL.product.productType)&&"tested"==e.status){f.GLOBALVAL.product.version>="5.1.8"&&("5.1.8"==f.GLOBALVAL.product.version?e.commonCaseReportList=(e.beforeCaseReportList||[]).concat(e.afterCaseReportList||[]):e.responseList=(e.beforeCaseReportList||[]).concat(e.responseList||[]).concat(e.afterCaseReportList||[]),delete e.beforeCaseReportList,delete e.afterCaseReportList),delete e.status;s((0,p.default)({time:Number(e.time.replace("ms",""))/1e3+"s",totalCase:1,successCase:"error"===e.reportStatus?0:1,errorCase:"error"===e.reportStatus?1:0,responseList:[e]}))}})};f.GLOBALVAL.product.version<"5.1.8"?(o={env:JSON.parse($("#automated-text").text()).env},d()):(o=JSON.parse(window.sessionStorage.getItem("plug-batchTest-info")),t(o.query,d))}else{h=!0;try{f.GLOBALVAL.port.auto.postMessage({index:e.index,stopStatus:!0})}catch(e){console.log(e)}}}function a(){var t={};f.GLOBALVAL.product.version<"5.1.8"&&(e(),$(document).on("DOMCharacterDataModified","#automated-text",function(s){try{t=JSON.parse($("#automated-text").text()),d!=t.flag&&(e(),d=t.flag),d=t.flag}catch(s){}})),f.GLOBALVAL.product.version>="5.9.0"&&$(document).on("click",".plug_ddt_modal_test_btn",function(){o({testStatus:"false"==$(this).attr("testing")?"testing":"tested",index:0,testWay:"batch"})}),$(document).on("click",".batch-test-btn",function(){var e="single",t=$(".batch-test-btn").index($(this));0===t&&(e="batch"),o({testStatus:"true"==$(this).attr("testing")?"tested":"testing",index:t,testWay:e})})}function r(){f.GLOBALVAL.product.version<"5.1.8"&&($(document).off("DOMCharacterDataModified","#automated-text"),$(document).off("mousedown",".batch-test-btn")),$(document).off("click",".batch-test-btn")}f.CONTENT_TOOLS.initFun();var c={responseList:[],status:"tested"},L={},d=0,h=!1,g=null,b=null,O=null;O=new MutationObserver(function(e){var t=document.getElementById("ui_btn_test"),s=document.getElementsByClassName("batch-test-btn");if(t)O.disconnect(),g=t.getAttribute("eo-attr-test-type"),"plug"===g&&a(),b=new MutationObserver(function(e){g=t.getAttribute("eo-attr-test-type"),"plug"===g?a():r()}),b.observe(t,{attributes:!0,attributeFilter:["eo-attr-test-type"],childList:!1,subtree:!1});else if(s[0]){if(O.disconnect(),!s[0].nextElementSibling)return void a();s=s[0];var o=s.getAttribute("class");o.indexOf("eo_theme_btn_success")>-1&&(g="plug",a()),b=new MutationObserver(function(e){s.getAttribute("class").indexOf("eo_theme_btn_success")>-1?(g="plug",a()):(g="server",r())}),b.observe(s,{attributes:!0,attributeFilter:["class"],childList:!1,subtree:!1})}}),O.observe(document,{attributes:!1,childList:!0,subtree:!0}),f.GLOBALVAL.product.version<"5.1.8"&&$(document).on("mousedown",".batch-test-btn",function(e){1==f.GLOBALVAL.isQuerying&&(e.stopPropagation(),alert(A.CONSTANT.LANG.Tips.lowNetWork[f.GLOBALVAL.product.LANG]))})}},183:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.caseTest=void 0;var o=s(1),a=function(e){return e&&e.__esModule?e:{default:e}}(o),n=s(22);t.caseTest=function(){function e(){$.ajax({url:n.GLOBALVAL.info.httpUrl+i,method:"POST",contentType:"application/x-www-form-urlencoded",data:{companyHashKey:n.GLOBALVAL.info.hashArgs.companyHashKey,spaceKey:n.GLOBALVAL.info.hashArgs.spaceKey,projectHashKey:n.GLOBALVAL.info.hashArgs.projectHashKey,apiID:n.GLOBALVAL.info.hashArgs.apiID}}).done(function(e,t,s){try{r=JSON.parse(e)}catch(t){r=e}}).fail(function(e,t){})}function t(){e(),$("#automated-text").bind("DOMCharacterDataModified",function(t){var s=JSON.parse($("#automated-text").text());u!=s.flag&&(e(),u=s.flag)}),$(document).on("click",".batch-test-btn",function(){L=!1;var e=$(".batch-test-btn"),t=e.index($(this)),s=JSON.parse($("#plug-batch-in-js").text()).env,i=$("#plug-batch-in-result-js");if("true"==$(this).attr("testing")){n.GLOBALVAL.port.batch=chrome.runtime.connect({name:"caseTest"});var u={};0==t?u=r:u.caseList=[r.caseList[t-1]],u.env=s,u.commonFunList=n.GLOBALVAL.info.commonFunList,u.index=t,u.LANG=n.GLOBALVAL.product.LANG,u.productType=n.GLOBALVAL.product.productType,u.location=n.GLOBALVAL.info.serverURL,u.httpUrl=n.GLOBALVAL.info.httpUrl,u.version=n.GLOBALVAL.product.version,n.GLOBALVAL.port.batch.postMessage(u),n.GLOBALVAL.port.batch.onMessage.addListener(function(e){for(s=0;s<r.caseList.length;s++)null!=e.responseList[s]||(e.responseList[s]=null);if(0==t){for(var s=e.responseList.length-1;s>=0;s--)null==e.responseList[s]&&(e.status="testing");window.sessionStorage.setItem("plug-background-result",(0,a.default)(e)),o={responseList:[],status:e.status},i.text((0,a.default)(o)),o={responseList:[],status:"tested"}}else{o.responseList[t-1]=e.responseList[t-1];for(var s=e.responseList.length-1;s>=0;s--)o.responseList[s]||(o.responseList[s]=null);window.sessionStorage.setItem("plug-background-result",(0,a.default)(e)),o={responseList:[],status:e.status},i.text((0,a.default)(o))}if("tested"==e.status&&!L){var u=[];0==t?r.caseList.forEach(function(t,s){u.push({caseID:t.caseID,result:e.responseList[s]})}):u=[{caseID:r.caseList[t-1].caseID,result:e.responseList[t-1]}],$.ajax({url:n.GLOBALVAL.info.httpUrl+c,method:"POST",contentType:"application/x-www-form-urlencoded",data:{companyHashKey:n.GLOBALVAL.info.hashArgs.companyHashKey,spaceKey:n.GLOBALVAL.info.hashArgs.spaceKey,projectHashKey:n.GLOBALVAL.info.hashArgs.projectHashKey,apiID:n.GLOBALVAL.info.hashArgs.apiID,result:(0,a.default)(u)}}).done(function(e,t,s){}).fail(function(e,t){})}})}else L=!0,n.GLOBALVAL.port.batch.postMessage({index:t,stopStatus:!0})})}function s(){$("#automated-text").unbind("DOMCharacterDataModified"),$(document).off("click",".batch-test-btn")}n.CONTENT_TOOLS.initFun();var o={responseList:[],status:"tested"},r={},i="apiManagementPro/TestCase/getTestCaseList",c="apiManagementPro/TestCase/addTestHistory",u=0,L=!1,l=null,d=null,p=null;switch(Number(n.GLOBALVAL.product.productType)){case 1:case 5:i="apiManagementPro/TestCase/getTestCaseList",c="apiManagementPro/TestCase/addTestHistory";break;default:i="apiManagementPro/TestCase/getTestCaseList",c="apiManagementPro/TestCase/addTestHistory"}p=new MutationObserver(function(e){var o=document.getElementById("case_btn_test"),a=document.getElementsByClassName("batch-test-btn"),n=document.getElementById("automated-text");if(o&&n){p.disconnect(),l=o.getAttribute("eo-attr-test-type"),"plug"===l&&t();var r=function(){l=o.getAttribute("eo-attr-test-type"),"plug"===l?t():s()};d=new MutationObserver(function(e){r()}),d.observe(o,{attributes:!0,attributeFilter:["eo-attr-test-type"],childList:!1,subtree:!1})}else if(a[0]&&n){if(p.disconnect(),!a[0].nextElementSibling)return void t();a=a[0];var i=a.getAttribute("class");i.indexOf("eo_theme_btn_success")>-1&&(l="plug",t()),d=new MutationObserver(function(e){a.getAttribute("class").indexOf("eo_theme_btn_success")>-1?(l="plug",t()):(l="server",s())}),d.observe(a,{attributes:!0,attributeFilter:["class"],childList:!1,subtree:!1})}}),p.observe(document,{attributes:!1,childList:!0,subtree:!0})}},184:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.batchCaseTest=void 0;var o=s(1),a=function(e){return e&&e.__esModule?e:{default:e}}(o),n=s(22),r=s(48);t.batchCaseTest=function(e){function t(e){var t=[];try{t=JSON.parse(window.sessionStorage.getItem("plug-batchTest-info"))}catch(e){console.log(e)}var s=[];t.forEach(function(e,t){s=s.concat(e.caseIDArr)}),s.length&&$.ajax({url:n.GLOBALVAL.info.httpUrl+r.batchCase.queryByID,method:"POST",contentType:"application/x-www-form-urlencoded",data:{spaceKey:n.GLOBALVAL.info.hashArgs.spaceKey,projectHashKey:n.GLOBALVAL.info.hashArgs.projectHashKey,caseID:(0,a.default)(s)}}).done(function(t,s,o){try{c=JSON.parse(t)}catch(e){c=t}e()}).fail(function(e,t){})}function s(){o();var e=function(){var e=$("#plug-batch-in-result-js"),s={},o=[],u={},L=0;if(1==p){t(function(){n.GLOBALVAL.port.batch=chrome.runtime.connect({name:"caseTest"});var t={},l=0;c.caseList.forEach(function(e,t){-1===o.indexOf(e.apiID)&&o.push(e.apiID),s[e.apiID]?s[e.apiID].caseList.push(e):s[e.apiID]={caseList:[e]}});var d=JSON.parse($("#plug-batch-in-js").text()).env;t.env=d,t.commonFunList=n.GLOBALVAL.info.commonFunList,t.index=0,t.productType=n.GLOBALVAL.product.productType,t.LANG=n.GLOBALVAL.product.LANG,t.location=n.GLOBALVAL.info.serverURL,t.httpUrl=n.GLOBALVAL.info.httpUrl,t.version=n.GLOBALVAL.product.version;var f=function(e){$.ajax({url:n.GLOBALVAL.info.httpUrl+r.batchCase.addHistory,method:"POST",contentType:"application/x-www-form-urlencoded",data:e}).done(function(e,t,s){}).fail(function(e,t){})},A=function(){L=o[l],u[L]={},t.caseList=s[L].caseList,n.GLOBALVAL.port.batch.postMessage(t)};n.GLOBALVAL.port.batch.onMessage.addListener(function(s){for(r=0;r<t.caseList.length;r++)null!=s.responseList[r]||(s.responseList[r]=null);for(var r=s.responseList.length-1;r>=0;r--)null==s.responseList[r]?s.status="testing":u[L][t.caseList[r].caseID]=s.responseList[r];var c={status:l<o.length-1?"testing":s.status,currentTestingApiID:L,report:u};if(window.sessionStorage.setItem("plug-background-result",(0,a.default)(c)),i={responseList:[],status:s.status},e.text((0,a.default)(i)),p&&"testing"!==s.status){var d=[];for(var r in u[L])d.push({caseID:r,result:u[L][r]});f({spaceKey:n.GLOBALVAL.info.hashArgs.spaceKey,projectHashKey:n.GLOBALVAL.info.hashArgs.projectHashKey,apiID:L,result:(0,a.default)(d)})}p&&"testing"!==s.status&&l<o.length-1&&(l++,A())}),A()})}else n.GLOBALVAL.port.batch.postMessage({index:0,stopStatus:!0})};$(".tbody-div").on("click",".batch-test-btn",function(){p="true"===$(this).attr("testing"),e()}),$("#case_btn_test").on("click",function(){p="true"===$(this).attr("testing"),e()})}function o(){$("#case_btn_test").off("click"),$(".tbody-div").off("click",".batch-test-btn")}n.CONTENT_TOOLS.initFun();var i={responseList:[],status:"tested"},c={},u=null,L=null,l=null,d=null,p=!1;d=new MutationObserver(function(t){var a=document.getElementById("case_btn_test"),n=null;if(n="case"===e?document.getElementsByClassName("tbody-div")[0]:document.getElementsByClassName("spreed_hpicpb")[0],a&&n){d.disconnect();var r=function(){u=a.getAttribute("eo-attr-test-type"),"plug"===u?s():o()};L=new MutationObserver(function(e){r()}),L.observe(a,{attributes:!0,attributeFilter:["eo-attr-test-type"],childList:!1,subtree:!1}),l=new MutationObserver(function(e){for(var t=0;t<e.length;t++)if("INNER-HTML-COMMON-DIRECTIVE"===e[t].target.nodeName){r();break}}),"case"===e?r():l.observe($(".conatiner_hpicpb")[0],{attributes:!1,childList:!0,subtree:!0})}}),d.observe(document,{attributes:!1,childList:!0,subtree:!0})}},185:function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.autoCodeTest=void 0;var a=s(11),n=o(a),r=s(1),i=o(r),c=s(15),u=o(c),L=s(7),l=o(L),d=s(8),p=o(d),f=s(22),A=s(48);t.autoCodeTest=function(){function e(e){var t={caseID:f.GLOBALVAL.info.hashArgs.caseID,companyHashKey:f.GLOBALVAL.info.hashArgs.companyHashKey,spaceKey:f.GLOBALVAL.info.hashArgs.spaceKey,projectHashKey:f.GLOBALVAL.info.hashArgs.projectHashKey,module:"commonCaseCode"===f.GLOBALVAL.info.testType?1:0};t.result=e;var s="";s=f.GLOBALVAL.product.version>="5.9.0"?A.autoUi.addHistory:A.autoCode.addHistory,$.ajax({url:f.GLOBALVAL.info.httpUrl+s,method:"POST",contentType:"application/x-www-form-urlencoded",data:t}).done(function(e,t,s){}).fail(function(e,t){console.log("Add History Fail")})}function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{testStatus:"testing"},s=window.sessionStorage.getItem("plug-autoTest-code"),o={},c=$("#plug-batch-in-result-js");if(s=JSON.parse(s),f.GLOBALVAL.port.autoCode=chrome.runtime.connect({name:"autoCodeTest"}),"tested"===t.testStatus)if(o.caseType=1,o.fileList=s.fileObj||[],o.caseName=s.caseName,o.caseID=f.GLOBALVAL.info.hashArgs.caseID,o.singleCaseList=(s.beforeCaseList||[]).concat([s.caseCode]).concat(s.afterCaseList||[]),o.productType=f.GLOBALVAL.product.productType,o.LANG=f.GLOBALVAL.product.LANG,o.version=f.GLOBALVAL.product.version,o.testType=f.GLOBALVAL.info.testType,o.env=s.env,o.hashArgs=f.GLOBALVAL.info.hashArgs,o.timeoutLimit=s.timeoutLimit,o.location=f.GLOBALVAL.info.serverURL,o.httpUrl=f.GLOBALVAL.info.httpUrl,o.commonFunList=f.GLOBALVAL.info.commonFunList,s.collectionArr&&s.collectionArr.length){var L=function(){var e=(0,p.default)(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<s.collectionArr.length)){e.next=9;break}if(!r){e.next=4;break}return e.abrupt("break",9);case 4:return e.next=6,d(s.collectionArr[t]);case 6:t++,e.next=1;break;case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),d=function(e){return new u.default(function(t,s){o.collectionInfo=e,f.GLOBALVAL.port.autoCode.postMessage(o),f.GLOBALVAL.port.autoCode.onMessage.removeListener(m.listenerCallback),m.listenerCallback=function(e){var s={};g.push(e),s[e.collectionName]=e,window.sessionStorage.setItem("plug-background-result",(0,i.default)(s)),h.totalCase++,"finish"==e.reportStatus||"finish"==e.status?h.successCase++:h.errorCase++,c.text((0,i.default)({status:"testing"})),t()},f.GLOBALVAL.port.autoCode.onMessage.addListener(m.listenerCallback)})},A=new Date,h={time:"0s",totalCase:0,errorCase:0,successCase:0},g=[];L().then(function(){if(h.status="tested",h.time=(new Date-A)/1e3+"s",window.sessionStorage.setItem("plug-background-result",(0,i.default)(h)),c.text((0,i.default)({status:"tested"})),!r){e((0,i.default)({time:h.time,totalCase:1,successCase:h.errorCase>0?0:1,errorCase:h.errorCase>0?1:0,responseList:[(0,n.default)(h,{responseList:g,type:"ddt",caseType:1,caseID:f.GLOBALVAL.info.hashArgs.caseID,caseName:s.caseName,status:h.errorCase>0?"error":"finish"})]}))}}).catch(function(e){console.log(e)})}else f.GLOBALVAL.port.autoCode.postMessage(o),f.GLOBALVAL.port.autoCode.onMessage.addListener(function(t){if(window.sessionStorage.setItem("plug-background-result",(0,i.default)(t)),a={status:"tested"},c.text((0,i.default)(a)),!r&&(1==f.GLOBALVAL.product.productType||5==f.GLOBALVAL.product.productType||2==f.GLOBALVAL.product.productType)){f.GLOBALVAL.product.version>="5.1.8"&&("5.1.8"==f.GLOBALVAL.product.version?t.commonCaseReportList=(t.beforeCaseReportList||[]).concat(t.afterCaseReportList||[]):t.responseList=(t.beforeCaseReportList||[]).concat(t.responseList||[]).concat(t.afterCaseReportList||[]),delete t.beforeCaseReportList,delete t.afterCaseReportList);e((0,i.default)({time:Number(t.time.replace("ms",""))/1e3+"s",totalCase:1,successCase:"finish"===t.status?1:0,errorCase:"finish"===t.status?0:1,responseList:[t]}))}});else{r=!0;try{f.GLOBALVAL.port.autoCode.postMessage({stopStatus:!0})}catch(e){}}}function s(){o(),f.GLOBALVAL.product.version>="5.9.0"&&$(document).on("click",".plug_ddt_modal_test_btn",function(){t({testStatus:"false"==$(this).attr("testing")?"testing":"tested"})}),$(document).on("click",".batch-test-btn",function(){r=!1,t({testStatus:"false"==$(this).attr("testing")?"testing":"tested"})})}function o(){$(document).off("click",".batch-test-btn")}f.CONTENT_TOOLS.initFun();var a={responseList:[],status:"tested"},r=!1,c=null,L=null,d=null;c=new MutationObserver(function(e){var t=document.getElementById("code_btn_test"),a=document.getElementsByClassName("batch-test-btn");if(t)c.disconnect(),L=t.getAttribute("eo-attr-test-type"),"plug"===L&&s(),d=new MutationObserver(function(e){L=t.getAttribute("eo-attr-test-type"),"plug"===L?s():o()}),d.observe(t,{attributes:!0,attributeFilter:["eo-attr-test-type"],childList:!1,subtree:!1});else if(a[0]){if(c.disconnect(),!a[0].nextElementSibling)return void s();a=a[0];var n=a.getAttribute("class");n.indexOf("eo_theme_btn_success")>-1&&(L="plug",s()),d=new MutationObserver(function(e){a.getAttribute("class").indexOf("eo_theme_btn_success")>-1?(L="plug",s()):(L="server",o())}),d.observe(a,{attributes:!0,attributeFilter:["class"],childList:!1,subtree:!1})}}),c.observe(document,{attributes:!1,childList:!0,subtree:!0});var m={}}},186:function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.batchAutoTest=void 0;var a=s(11),n=o(a),r=s(15),i=o(r),c=s(7),u=o(c),L=s(8),l=o(L),d=s(1),p=o(d),f=s(22),A=s(10),m=s(48);t.batchAutoTest=function(){function e(e,t){r=null;var s={spaceKey:f.GLOBALVAL.info.hashArgs.spaceKey,projectHashKey:f.GLOBALVAL.info.hashArgs.projectHashKey,caseID:(0,p.default)(e),module:"commonCaseBatch"==f.GLOBALVAL.info.testType?1:0};$.ajax({url:f.GLOBALVAL.info.httpUrl+m.batchAuto.queryByID,method:"POST",contentType:"application/x-www-form-urlencoded",data:s}).done(function(e,s,o){"000000"==e.statusCode?(r=e,t()):r=[]}).fail(function(e,t){}).always(function(){})}function t(e,t,s,o,a){f.GLOBALVAL.isQuerying=!0,r=null;var n={companyHashKey:f.GLOBALVAL.info.hashArgs.companyHashKey,spaceKey:f.GLOBALVAL.info.hashArgs.spaceKey,projectHashKey:f.GLOBALVAL.info.hashArgs.projectHashKey,projectID:f.GLOBALVAL.info.hashArgs.projectID,orderBy:e,asc:t,condition:o,connID:s||null,groupID:-1};n.groupID=void 0!=f.GLOBALVAL.info.hashArgs.grandSonGroupID?f.GLOBALVAL.info.hashArgs.grandSonGroupID:void 0!=f.GLOBALVAL.info.hashArgs.childGroupID?f.GLOBALVAL.info.hashArgs.childGroupID:void 0==f.GLOBALVAL.info.hashArgs.groupID?0:-1==f.GLOBALVAL.info.hashArgs.groupID?0:f.GLOBALVAL.info.hashArgs.groupID,$.ajax({url:f.GLOBALVAL.info.httpUrl+m.batchAuto.query,method:"POST",contentType:"application/x-www-form-urlencoded",data:n}).done(function(e,t,s){try{e=JSON.parse(e)}catch(e){}if("000000"==e.statusCode)try{r=JSON.parse(e).caseList}catch(t){r=e.caseList}else r=[]}).fail(function(e,t){}).always(function(){f.GLOBALVAL.isQuerying=!1})}function s(){a();var t="single",s=!0,o=!1,c={};d.removeListener=function(e){e&&(f.GLOBALVAL.port.autoCode.onMessage.removeListener(e),f.GLOBALVAL.port.auto.onMessage.removeListener(e))};var A=function a(A){if("true"==A.attr("testing")){o=!1;var g=$("button.batch-test-btn").index(A);if(f.GLOBALVAL.product.version<"5.1.8"){switch(g.toString()){case"0":t="batch",s=!0;break;case"1":t="batch",s=!1;break;default:t="single",s=!0}"0"!=g&&"1"!=g||($(".batch-test-btn").off("click"),$(".batch-test-btn").on("click",function(){"false"==$(this).attr("testing")?(d.removeListener(d.callback),o=!0,c.time=(new Date-L.time.init)/1e3+"s",c.status="tested",window.sessionStorage.setItem("plug-background-result",(0,p.default)(c)),f.GLOBALVAL.port.autoCode.postMessage({stopStatus:!0}),f.GLOBALVAL.port.auto.postMessage({index:0,stopStatus:!0})):a($(this))}))}else{switch(g.toString()){case"0":case"-1":t="batch";break;default:t="single"}s="serial"!==A.attr("eo-attr-excute-type")}var b=[],O={fileList:[]},v={},T=function(){c=f.BATCH_AUTO_FUN.initReport(t,b),f.GLOBALVAL.port.autoCode=chrome.runtime.connect({name:"autoCodeTest"}),f.GLOBALVAL.port.auto=chrome.runtime.connect({name:"autoUiTest"}),L.time.init=new Date;var e=[f.GLOBALVAL.port.auto,f.GLOBALVAL.port.autoCode],a={};switch(b.forEach(function(e,t){a[e.caseID]=t}),s){case!1:var n=function(){var e=(0,l.default)(u.default.mark(function e(){var t,s,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<b.length)){e.next=21;break}if(!o){e.next=4;break}return e.abrupt("break",21);case 4:if(!b[t].dataCollectionList||!b[t].dataCollectionList.length){e.next=16;break}s=b[t].dataCollectionList.length,b[t].dataCollectionList[s-1].lastCollection=!0,a=0;case 8:if(!(a<s)){e.next=14;break}return e.next=11,r(b,t,b[t].dataCollectionList[a]);case 11:a++,e.next=8;break;case 14:e.next=18;break;case 16:return e.next=18,r(b,t);case 18:t++,e.next=1;break;case 21:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),r=function(s,n,r){return new i.default(function(i,u){O.collectionInfo=r,e[s[n].caseType].postMessage(f.BATCH_AUTO_FUN.formatBasicData(s[n].caseType,s[n],v,O)),d.removeListener(d.callback),d.callback=function(e){o||f.BATCH_AUTO_FUN.receivedReport(e,c,t,L,s,a,m.batchAuto.addHistory,i)},f.GLOBALVAL.port.autoCode.onMessage.addListener(d.callback),f.GLOBALVAL.port.auto.onMessage.addListener(d.callback)})};n().then(function(){}).catch(function(e){console.log(e)});break;default:var p=function(t,s,o){return new i.default(function(a,n){O.collectionInfo=o,e[t[s].caseType].postMessage(f.BATCH_AUTO_FUN.formatBasicData(t[s].caseType,t[s],v,O)),f.GLOBALVAL.resolve_obj[t[s].caseID+o.collectionName]=a})},A=function(){var e=(0,l.default)(u.default.mark(function e(t,s){var o,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=t[s].dataCollectionList.length,t[s].dataCollectionList[o-1].lastCollection=!0,a=0;case 3:if(!(a<o)){e.next=9;break}return e.next=6,p(t,s,t[s].dataCollectionList[a]);case 6:a++,e.next=3;break;case 9:case"end":return e.stop()}},e,this)}));return function(t,s){return e.apply(this,arguments)}}();f.GLOBALVAL.resolve_obj={};for(var h=0;h<b.length&&!o;h++)b[h].dataCollectionList&&b[h].dataCollectionList.length?A(b,h):(O.collectionInfo=[],e[b[h].caseType].postMessage(f.BATCH_AUTO_FUN.formatBasicData(b[h].caseType,b[h],v,O)));d.removeListener(d.callback),d.callback=function(e){o||f.BATCH_AUTO_FUN.receivedReport(e,c,t,L,b,a,m.batchAuto.addHistory)},f.GLOBALVAL.port.autoCode.onMessage.addListener(d.callback),f.GLOBALVAL.port.auto.onMessage.addListener(d.callback)}};if(f.GLOBALVAL.product.version>="5.1.8"){if(v=JSON.parse(window.sessionStorage.getItem("plug-batchTest-info")),"autoBatch"!==f.GLOBALVAL.info.testType&&"commonCaseBatch"!==f.GLOBALVAL.info.testType)return void(y&&y.disconnect());e(v.caseID,function(){b=r.caseList,O.fileList=r.fileList,T()})}else{var B=[];h.filter.search?r&&r.forEach(function(e,t){e.caseName.indexOf(h.filter.search)>-1&&B.push(e)}):B=(0,n.default)([],r);try{v={env:JSON.parse($("#automated-text").text()).env}}catch(e){}"batch"===t||f.GLOBALVAL.product.version>="5.1.8"?b=B:b.push(B[g-2]),T()}}else d.removeListener(d.callback),o=!0,c.time=(new Date-L.time.init)/1e3+"s",window.sessionStorage.setItem("plug-background-result",(0,p.default)(c)),f.GLOBALVAL.port.autoCode&&f.GLOBALVAL.port.autoCode.postMessage({stopStatus:!0}),f.GLOBALVAL.port.auto&&f.GLOBALVAL.port.auto.postMessage({index:0,stopStatus:!0})};$(".batch-test-btn").on("click",function(){A($(this))}),f.GLOBALVAL.product.version>="5.1.8"&&($(document).on("click",".batch-test-btn",function(){"plug_tips_modal_test_btn"==$(this).attr("id")&&A($(this))}),$("#case_btn_test").on("click",function(){A($(this))}),$(".tbody-div").on("click",".batch-test-btn",function(){A($(this))}))}function o(){y=new MutationObserver(function(e){f.GLOBALVAL.product.version<"5.1.8"&&y.disconnect(),s()}),y.observe(document.getElementById("all_test_container"),{attributes:!1,childList:!0,subtree:!0}),s()}function a(){$(document).off("click",".batch-test-btn"),$("#automated-text").unbind("DOMCharacterDataModified"),f.GLOBALVAL.product.version>="5.1.8"&&($(".tbody-div").off("click",".batch-test-btn"),$("#case_btn_test").off("click"),$(".batch-test-btn").off("click"))}f.CONTENT_TOOLS.initFun();var r=null,c=null;if(-2!=f.GLOBALVAL.info.hashArgs.groupID&&-3!=f.GLOBALVAL.info.hashArgs.groupID){var L={time:{init:null},num:0},d={},h=null,g=null,b=null,O=null,y=null;O=new MutationObserver(function(e){var t=document.getElementById("automated-text"),s=document.getElementById("all_btn_test"),n=document.getElementById("case_btn_test"),r=document.getElementsByClassName("query-ul")[0];if(s||n||r){var i=function(){b=(s||n).getAttribute("eo-attr-test-type"),"plug"===b?o():a()},c=function(){var e=s||n;e&&O.disconnect(),g=new MutationObserver(function(e){i()}),g.observe(e,{attributes:!0,attributeFilter:["eo-attr-test-type"],childList:!1,subtree:!1})};if(s||n)f.GLOBALVAL.product.version>="5.1.8"?n&&(c(),i()):t&&(c(),i());else if(r&&t){if(O.disconnect(),2===r.childElementCount)return b="plug",void o();var u=r.childNodes[0].innerHTML;(u.indexOf("服务器")>-1||u.indexOf("server")>-1)&&(b="plug",o()),r.childNodes[0].addEventListener("click",function(){var e=r.childNodes[0].innerHTML;e.indexOf("服务器")>-1||e.indexOf("server")>-1?b="plug":(b="server",a())})}}}),O.observe(document,{attributes:!1,childList:!0,subtree:!0}),f.GLOBALVAL.product.version<"5.1.8"&&($(document).on("mousedown",".batch-test-btn",function(e){1==f.GLOBALVAL.isQuerying&&(e.stopPropagation(),alert(A.CONSTANT.LANG.Tips.lowNetWork[f.GLOBALVAL.product.LANG]))}),$(document).on("DOMCharacterDataModified","#automated-text",function(e){try{h=JSON.parse($("#automated-text").text()),h.filter=h.filter||{},c?(c!=h.flag&&(c=h.flag,t(h.filter.orderBy,h.filter.asc,h.filter.connID,h.filter.condition,h.filter.search)),o()):(c=h.flag,t(h.filter.orderBy,h.filter.asc,h.filter.connID,h.filter.condition,h.filter.search))}catch(e){}}))}}},187:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalTest=void 0;var o=s(1),a=function(e){return e&&e.__esModule?e:{default:e}}(o),n=s(22);t.normalTest=function(e){function t(){var e=document.getElementsByClassName("send-btn");if(n.GLOBALVAL.product.version>="6.5.0"){var t=document.getElementById("plug-in-js");t&&(n.GLOBALVAL.observe.observerDocument.disconnect(),p=new MutationObserver(function(e){var t=JSON.parse(window.sessionStorage.getItem("plug-normalTest-info"));if(t)switch(t.protocol){case"websocket":o(t);break;case"http":default:switch(t.status){case"ajax":r(t);break;case"downloadFile":c();break;case"abort":i();break;case"openNewTab":u()}}}),p.observe(t,{attributes:!0,attributeFilter:["eo-attr-change-flag"]}))}else if(e.length>=2&&(n.GLOBALVAL.observe.observerDocument.disconnect(),e=e[0],f(e),p=new MutationObserver(function(t){f(e)}),n.GLOBALVAL.product.version>="6.3.0"?p.observe(e,{attributes:!0,attributeFilter:["eo-attr-test-type"]}):p.observe(e,{attributes:!0,attributeFilter:["class"]})),n.GLOBALVAL.product.version>="6.3.0"){var s=document.getElementById("connect_websocket_btn"),a=document.getElementById("plug-in-js");s&&a&&(n.GLOBALVAL.observe.observerDocument.disconnect(),p=new MutationObserver(function(e){o(JSON.parse(window.sessionStorage.getItem("plug-normalTest-info")))}),p.observe(a,{attributes:!0,attributeFilter:["eo-attr-change-flag"]}))}}function s(e,t,s){if(0!=n.GLOBALVAL.product.productType)try{var o="";switch(s=JSON.parse(s),Number(n.GLOBALVAL.product.productType)){case 1:case 5:o=window.location.hash.indexOf("/quickTest")>-1&&!n.GLOBALVAL.info.hashArgs.apiID?"apiManagementPro/QuickTest/addTestHistory":window.location.hash.indexOf("/unitTest")>-1?"space/ApiTest/addTestHistory":"apiManagementPro/Test/addTestHistory";break;case 2:o=window.location.hash.indexOf("quickTest")>-1&&!n.GLOBALVAL.info.hashArgs.apiID?"apiManagementPro/QuickTest/addTestHistory":window.location.hash.indexOf("/unitTest")>-1?"space/ApiTest/addTestHistory":"apiManagementPro/Test/addTestHistory"}var r={apiProtocol:"0",URL:s.requestBody.url,headers:s.requestBody.historyHeaders,requestType:s.requestBody.params.requestType,params:s.requestBody.historyParams,method:n.CONTENT_TOOLS.judgeRequestMethod(t.requestInfo.apiRequestType),methodType:t.requestInfo.apiRequestType},i={headers:s.testResult.headers,body:s.testResult.body,httpCode:s.testHttpCode,reportList:s.reportList,testDeny:s.testDeny,responseType:s.responseType,responseLength:s.responseLength};$.ajax({url:n.GLOBALVAL.info.httpUrl+o,method:"POST",contentType:"application/x-www-form-urlencoded",data:{companyHashKey:n.GLOBALVAL.info.hashArgs.companyHashKey,spaceKey:n.GLOBALVAL.info.hashArgs.spaceKey,projectHashKey:n.GLOBALVAL.info.hashArgs.projectHashKey,apiID:n.GLOBALVAL.info.hashArgs.apiID,testTime:e,general:(0,a.default)(s.general||{}),requestInfo:(0,a.default)(r),resultInfo:(0,a.default)(i),beforeInject:t.script.before,afterInject:t.script.after}}).done(function(e,t,s){}).fail(function(e,t){})}catch(e){console.log(e)}}function o(e){n.GLOBALVAL.port.websocket=chrome.runtime.connect({name:"websocketTest"}),n.GLOBALVAL.port.websocket.postMessage(e),n.GLOBALVAL.port.websocket.onMessage.addListener(function(e,t,s){window.sessionStorage.setItem("plug-background-result",e),$("#plug-in-result-js").text(1)})}function r(t){n.GLOBALVAL.port.normal=chrome.runtime.connect({name:"normalTest"}),d=!0,t.commonFunList=n.GLOBALVAL.info.commonFunList,t.productType=n.GLOBALVAL.product.productType,t.LANG=n.GLOBALVAL.product.LANG,t.location=n.GLOBALVAL.info.serverURL,t.httpUrl=n.GLOBALVAL.info.httpUrl,t.version=n.GLOBALVAL.product.version;var o=n.CONTENT_TOOLS.getTime();n.GLOBALVAL.port.normal.postMessage(t),n.GLOBALVAL.port.normal.onMessage.addListener(function(r,i,c){if(d){var u=$("#plug-in-result-js");"210000"==r.statusCode&&console.log("请求发送失败，请正确填写接口信息");var L=JSON.parse(r.backResult).statusCode;if("000000"==L&&"share"!=e){var l=JSON.parse(r.backResult),p={apiProtocol:"0",URL:l.requestBody.url,headers:l.requestBody.historyHeaders,requestType:l.requestBody.params.requestType,params:l.requestBody.historyParams,method:n.CONTENT_TOOLS.judgeRequestMethod(t.requestInfo.apiRequestType),methodType:t.requestInfo.apiRequestType},f={headers:l.testResult.headers,body:l.testResult.body,httpCode:l.testHttpCode,testDeny:l.testDeny,reportList:l.reportList,responseType:l.responseType,responseLength:l.responseLength};l.history={beforeInject:t.script.before,afterInject:t.script.after,requestInfo:p,resultInfo:f},r.backResult=(0,a.default)(l)}window.sessionStorage.setItem("plug-background-result",r.backResult),u.text(1),d=!1;if(document.getElementById("eo_plug_need_response_block")&&r.base64BlobData){var A=new MutationObserver(function(e){var t=document.getElementById("eo_plug_img_file");t&&(A.disconnect(),t.src=r.base64BlobData)});A.observe(document.getElementById("eo_plug_need_response_block"),{subtree:!0,childList:!0})}"000000"==L&&"share"!=e&&s(o,t,r.backResult)}})}function i(){d=!1,n.GLOBALVAL.port.normal.postMessage({stopStatus:!0})}function c(){n.GLOBALVAL.port.normal=chrome.runtime.connect({name:"downloadReport"}),n.GLOBALVAL.port.normal.postMessage({fileData:$("#plug-in-js").text()})}function u(){if(navigator.userAgent.indexOf("Firefox")>-1){var e={};try{e=JSON.parse($("#plug-in-js").text())}catch(e){}window.open("","_blank").location.replace(e.blobUrl)}else n.GLOBALVAL.port.normal=chrome.runtime.connect({name:"newTabReport"}),n.GLOBALVAL.port.normal.postMessage({fileData:$("#plug-in-js").text()})}function L(){$(".send-btn").on("click",function(){if(!(n.GLOBALVAL.product.version<"6.3.0"&&"nodejs"===window.localStorage.getItem("EOLINKER_TEST_USE_SOFTWARE_TYPE")))if(d)i();else{var e=window.sessionStorage.getItem("plug-normalTest-info");if(!e)return;e=JSON.parse(e),r(e)}}),$(document).on("click","#eo_plug_download_file",function(){c()}),$(document).on("click","#eo_plug_preview_new_tab",function(){u()})}function l(){$(".send-btn").off("click"),$(document).off("click","#eo_plug_download_file"),$(document).off("click","#eo_plug_preview_new_tab")}n.CONTENT_TOOLS.initFun();var d=!1,p=null,f=function(e){var t=e.getAttribute("eo-attr-test-type"),s=e.getAttribute("class");l(),s.indexOf("eo_theme_btn_success")>-1&&"server"!==t&&L()};n.GLOBALVAL.observe.observerDocument&&n.GLOBALVAL.observe.observerDocument.disconnect(),n.GLOBALVAL.observe.observerDocument=new MutationObserver(function(e){t()}),n.GLOBALVAL.observe.observerDocument.observe(document,{attributes:!1,childList:!0,subtree:!0})}},22:function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.BATCH_AUTO_FUN=t.CONTENT_TOOLS=t.GLOBALVAL=void 0;var a=s(1),n=o(a),r=s(11),i=o(r),c=t.GLOBALVAL={product:{productType:1,hasConsole:!1,version:!0},resolve_obj:{},isQuerying:!1,info:{prefixStr:"index.php/",commonFunList:null,hashArgs:null,serverURL:null},observe:{},port:{batch:null,auto:null,autoCode:null,normal:null}},u=(t.CONTENT_TOOLS={initFun:function(){window.sessionStorage.removeItem("plug-normalTest-info"),window.sessionStorage.removeItem("plug-autoTest-code"),window.sessionStorage.removeItem("plug-background-result"),$(document).off("click"),$(document).off("DOMCharacterDataModified"),$(document).off("mousedown");var e=[c.port.auto,c.port.batch,c.port.autoCode,c.port.normal,c.port.websocket];try{e.forEach(function(e){e&&e.disconnect()})}catch(e){console.log(e)}},judgeRequestMethod:function(e){return["POST","GET","PUT","DELETE","HEAD","OPTIONS","PATCH"][e]},getProductInfo:function(){var e=!1,t=!1,s={version:!1,productType:1};try{e=$('meta[name="product-type"]')[0].content}catch(e){}try{t=$('meta[name="version"]')[0].content}catch(e){}return s.productType=e||!1,t&&(2==s.productType&&/\d{8}/.test(t)?s.version=t<20180910?"4.1":"4.1+":s.version=t),s},getServerURL:function(){var e=window.location.origin+window.location.pathname;switch(Number(c.product.productType)){case 1:case 5:c.info.httpUrl=e;break;case 2:e=e.replace(/independent\/$/i,""),c.info.httpUrl=e+c.info.prefixStr}c.info.serverURL=e},getHashStringArgs:function(){var e=[],t={},s=[],o=null,a=null,n=null,r=0,i=0;if(e=window.location.hash,e.indexOf("?")>-1)for(s=e.split("?"),s=s[1].split("&"),i=s.length,r=0;r<i;r++)o=s[r].split("="),a=decodeURIComponent(o[0]),n=decodeURIComponent(o[1]),a.length>0&&(t[a]=n);return t},getTime:function(){var e={fun:{getTime:null}};return e.fun.getTime=function(){var e={info:{date:new Date,time:{year:null,month:null,day:null,hour:null,minute:null,second:null},string:null}};return e.info.time.year=e.info.date.getFullYear(),e.info.time.month=e.info.date.getMonth()+1,e.info.time.day=e.info.date.getDate(),e.info.time.hour=e.info.date.getHours(),e.info.time.minute=e.info.date.getMinutes(),e.info.time.second=e.info.date.getSeconds(),e.info.string=e.info.time.year+"-",e.info.time.month<10&&(e.info.string+="0"),e.info.string+=e.info.time.month+"-",e.info.time.day<10&&(e.info.string+="0"),e.info.string+=e.info.time.day+" ",e.info.time.hour<10&&(e.info.string+="0"),e.info.string+=e.info.time.hour+":",e.info.time.minute<10&&(e.info.string+="0"),e.info.string+=e.info.time.minute+":",e.info.time.second<10&&(e.info.string+="0"),e.info.string+=e.info.time.second,e.info.string},e.fun.getTime()},judgeWhichTest:function(){for(var e=window.location.href,t=[{name:"share",pattReg:/(\/api\/test)|(\/quickTest)/i,childPattReg:/(\/share\/)/i},{name:"normal",pattStr:"share",pattReg:/(\/api\/test)|(\/quickTest)/i},{name:"case",pattReg:/\/api\/case/},{name:"commonCaseUi",pattReg:/(commonCase\/api)|(\/scene\/api\/env)|(\/commonCase\/api\/env)/i},{name:"autoUi",pattReg:/(\/scene\/api)|(\/cenario\/api)/i},{name:"commonCaseCode",pattReg:/(commonCase\/mode)|(scene\/mode\/env)|(\/commonCase\/mode\/env)|(cenario\/mode\/env)/i},{name:"autoCode",pattReg:/(\/scene\/mode)|(scene\/mode\/advanced)|(cenario\/mode\/advanced)|(\/test\/mode\/advanced)/i},{name:"autoBatch",pattReg:/(\/inside\/test\/default\?)|(\/automatic\/inside\/cenario\/\?)|(\/automatic\/inside\/scene\/\?)/i},{name:"commonCaseBatch",pattReg:/(\/automatic\/inside\/commonCase\/\?)/i},{name:"batchCase",pattReg:/(\/project\/inside\/apiCase)/i},{name:"commonFunction",pattReg:/(function\/operate\/edit)/i},{name:"commonQuickTest",pattReg:/(home\/unitTest\/)|(ams\/unitTest)/i}],s=0;s<t.length;s++){var o=t[s];if(o.pattReg.test(e)&&(!o.childPattReg||o.childPattReg.test(e)))return o.name}}},t.BATCH_AUTO_FUN={formatBasicData:function(e,t,s,o){var a=[];switch(e){case 0:if("5.1.8"==c.product.version){var n=!1;t.beforeCaseList=[],t.afterCaseList=[],t.singleCaseList.forEach(function(e,s){switch(e.caseType){case 0:case 1:n?t.afterCaseList.push(e):t.beforeCaseList.push(e);break;default:n=!0,a.push(e)}})}else a=t.singleCaseList;break;default:a=(t.beforeCaseList||[]).concat([t.caseCode]).concat(t.afterCaseList||[])}return{singleCaseList:a,caseType:e,caseID:t.caseID,caseName:t.caseName,collectionInfo:o.collectionInfo,testType:c.info.testType,LANG:c.product.LANG,productType:c.product.productType,version:c.product.version,location:c.info.serverURL,httpUrl:c.info.httpUrl,env:s.env,fileList:o.fileList||{},hashArgs:c.info.hashArgs,timeoutLimit:s.timeoutLimit,commonFunList:c.info.commonFunList,beforeCaseList:t.beforeCaseList||{},afterCaseList:t.afterCaseList||{}}},initReport:function(e,t){var s={time:"0ms",successCase:0,errorCase:0,totalCase:0,responseList:[],status:"testing"};return s.totalCase="batch"===e?t.length:1,s},formatReportArrayToObject:function(e,t){switch(e){case"automatic":if(1===t.caseType)return t;if("ddt"==t.type)return t;var s={time:t.time,status:t.status,caseName:t.caseName,passNum:t.passNum,totalNum:t.totalNum,codeErrNum:t.codeErrNum,terminateRequestNum:t.terminateRequestNum,assertErrNum:t.assertErrNum,timeoutErrNum:t.timeoutErrNum,requestErrNum:t.requestErrNum,reportStatus:t.reportStatus,unexecutedNum:t.unexecutedNum,report:{},tempIDArr:[]},o=(t.beforeCaseReportList||[]).concat(t.responseList||[]).concat(t.afterCaseReportList||[]);o=o.filter(function(e){return e});var a=[];return o.forEach(function(e,t){e&&(a.push(e.tempID),s.report[e.tempID]=o[t])}),s.tempIDArr=a,s}},formatBatchAutoReceivedReport:function(e){return e=(0,i.default)({},e),e.report={},e.responseList.forEach(function(t){t&&(e.report[t.caseID]=u.formatReportArrayToObject("automatic",t))}),delete e.responseList,e},formatCaseReportToHistory:function(e){return c.product.version<"5.1.8"?e:(e.responseList.forEach(function(e){e&&("5.1.8"==c.product.version?e.commonCaseReportList=(e.beforeCaseReportList||[]).concat(e.afterCaseReportList||[]):e.responseList=(e.beforeCaseReportList||[]).concat(e.responseList||[]).concat(e.afterCaseReportList||[]),0===e.reportType&&delete e.status,delete e.beforeCaseReportList,delete e.afterCaseReportList)}),delete e.status,e)},receivedReport:function(e,t,s,o,a,r,L,l){var d=$("#plug-batch-in-result-js"),p={responseList:[],status:"testing"};if("batch"===s){var f=!1;if(t.time=(new Date-o.time.init)/1e3+"s",e.collectionName){t.responseList[r[e.caseID]]=t.responseList[r[e.caseID]]||{time:"0s",caseType:e.caseType,type:"ddt",totalCase:0,errorCase:0,successCase:0,caseID:e.caseID,caseName:e.caseName,responseList:[]};var A=["reportStatus","status"];if(t.responseList[r[e.caseID]].time=(new Date-o.time.init)/1e3+"s",t.responseList[r[e.caseID]].responseList.push(e),t.responseList[r[e.caseID]].totalCase++,"finish"==e.reportStatus||"finish"==e.status?t.responseList[r[e.caseID]].successCase++:t.responseList[r[e.caseID]].errorCase++,!e.lastCollection)return l&&l("success"),void(c.resolve_obj[e.caseID+e.collectionName]&&c.resolve_obj[e.caseID+e.collectionName]());t.responseList[r[e.caseID]].errorCase>0?t.responseList[r[e.caseID]][A[e.caseType]]="error":t.responseList[r[e.caseID]][A[e.caseType]]="finish"}else t.responseList[r[e.caseID]]=e;"finish"==e.reportStatus||"finish"==e.status?t.successCase++:t.errorCase++;var m=function(e){a.length==t.successCase+t.errorCase&&(f=!0,p.status="tested"),window.sessionStorage.setItem("plug-background-result",(0,n.default)(e)),d.text((0,n.default)(p))};if(c.product.version>="5.1.8"){var h=(0,i.default)({},t);h.responseList=[t.responseList[r[e.caseID]]],h=u.formatBatchAutoReceivedReport(h),m(h)}else m(t);l&&l("success"),c.resolve_obj[e.caseID+e.collectionName]&&c.resolve_obj[e.caseID+e.collectionName](),1!=f||1!=c.product.productType&&5!=c.product.productType&&2!=c.product.productType||$.ajax({url:c.info.httpUrl+L,method:"POST",contentType:"application/x-www-form-urlencoded",data:{spaceKey:c.info.hashArgs.spaceKey,projectHashKey:c.info.hashArgs.projectHashKey,module:"commonCaseBatch"==c.info.testType?1:0,result:(0,n.default)(u.formatCaseReportToHistory(t))}}).done(function(e,t,s){c.product.version>="5.1.8"&&(window.sessionStorage.setItem("plug-background-result",(0,n.default)({logID:e.logID,status:"tested"})),d.text((0,n.default)(p)))}).fail(function(e,t){console.log("Add History Fail")})}else{if(t.time=(new Date-o.time.init)/1e3+"s",t.status="tested",e.collectionName){t.responseList[r[e.caseID]]=t.responseList[r[e.caseID]]||{time:"0s",caseType:e.caseType,type:"ddt",totalCase:0,errorCase:0,successCase:0,caseID:e.caseID,caseName:e.caseName,responseList:[]};var g=["reportStatus","status"];if(t.responseList[r[e.caseID]].time=(new Date-o.time.init)/1e3+"s",t.responseList[r[e.caseID]].responseList.push(e),t.responseList[r[e.caseID]].totalCase++,"finish"==e.reportStatus||"finish"==e.status?t.responseList[r[e.caseID]].successCase++:t.responseList[r[e.caseID]].errorCase++,!e.lastCollection)return l&&l("success"),void(c.resolve_obj[e.caseID+e.collectionName]&&c.resolve_obj[e.caseID+e.collectionName]());t.responseList[r[e.caseID]].errorCase>0?t.responseList[r[e.caseID]][g[e.caseType]]="error":t.responseList[r[e.caseID]][g[e.caseType]]="finish"}else t.responseList=[e];if(c.product.version>="5.1.8"?window.sessionStorage.setItem("plug-background-result",(0,n.default)(u.formatBatchAutoReceivedReport(t))):window.sessionStorage.setItem("plug-background-result",(0,n.default)(t)),p.status="tested",d.text((0,n.default)(p)),l&&l("success"),c.resolve_obj[e.caseID+e.collectionName]&&c.resolve_obj[e.caseID+e.collectionName](),1==c.product.productType||2==c.product.productType||5==c.product.productType){var b={caseID:a[0].caseID,spaceKey:c.info.hashArgs.spaceKey,projectHashKey:c.info.hashArgs.projectHashKey,module:"commonCaseBatch"==c.info.testType?1:0};switch(b.result=t,e.caseType.toString()){case"0":b.result.successCase="error"===e.reportStatus?0:1,b.result.errorCase="error"===e.reportStatus?1:0;break;case"1":b.result.successCase="finish"===e.status?1:0,b.result.errorCase="finish"===e.status?0:1}b.result=(0,n.default)(u.formatCaseReportToHistory(b.result)),$.ajax({url:c.info.httpUrl+L,method:"POST",contentType:"application/x-www-form-urlencoded",data:b}).done(function(e,t,s){c.product.version>="5.1.8"&&(window.sessionStorage.setItem("plug-background-result",(0,n.default)({logID:e.logID,status:"tested"})),d.text((0,n.default)(p)))}).fail(function(e,t){console.log("Add History Fail")})}}}})},48:function(e,t){e.exports={batchCase:{queryByID:"apiManagementPro/TestCase/batchGetTestCase",addHistory:"apiManagementPro/TestCase/addTestHistory"},autoUi:{query:"automatedTest/AutomatedTestCaseSingle/getSingleCaseList",queryByID:"automatedTest/AutomatedTestCaseSingle/batchGetSingleCaseDataList",addHistory:"automatedTest/AutomatedTestHistory/addTestHistory"},autoCode:{addHistory:"automatedTest/AutomatedTestHistory/addTestLog"},batchAuto:{query:"automatedTest/AutomatedTestCase/getTestCaseDataList",queryByID:"automatedTest/AutomatedTestCase/batchGetTestCaseDataList",addHistory:"automatedTest/AutomatedTestHistory/addTestHistory"}}}},[180]);